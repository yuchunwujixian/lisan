<!DOCTYPE html>
<html lang="zh-cn">
    {include file="public/head" title="商品规格编辑" /}

    <body class="inside-header inside-aside is-dialog">
        <div id="main" role="main">
            <div class="tab-content tab-addtabs">
                <div id="content">
                    <div class="row">
                        <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
                            <section class="content-header hide">
                                <h1>
                                    控制台                                    <small>Control panel</small>
                                </h1>
                            </section>
                            <div class="content">
                                <form id="add-form" class="form-horizontal" role="form" data-toggle="validator" method="POST" action="{:url('admin/goods/specEdit')}">
                                    <input type="hidden" name="spec_id" value="{$row['spec_id']}">

                                    <div class="form-group">
                                        <label for="c-name" class="control-label col-xs-12 col-sm-2">规格名称:</label>
                                        <div class="col-xs-12 col-sm-8">
                                            <input id="c-name" data-rule="required" class="form-control" name="row[spec_name]" value="{$row['spec_name']}" type="text">
                                        </div>
                                    </div>

                                    <div class="form-group">
                                        <label for="c-desc" class="control-label col-xs-12 col-sm-2">规格描述:</label>
                                        <div class="col-xs-12 col-sm-8">
                                            <input id="c-desc" data-rule="required" class="form-control" name="row[spec_desc]" value="{$row['spec_desc']}" type="text">
                                        </div>
                                    </div>

                                    <div class="form-group">
                                        <label for="c-weigh" class="control-label col-xs-12 col-sm-2">权重:</label>
                                        <div class="col-xs-12 col-sm-8">
                                            <input id="c-weigh" class="form-control" name="row[weigh]" type="number"  value="{$row['weigh']}">
                                        </div>
                                    </div>
                                    
                                    <div id="rows">
                                        {if $row.values}
                                        {volist name="row.values" id="vo"}
                                            <div class="form-group">
                                                <label for="c-value" class="control-label col-xs-12 col-sm-2">{if $key==0}属性:{/if}</label>
                                                <div class="col-xs-10 col-sm-7">
                                                    <input data-edit class="form-control" data-id="{$vo.spec_value_id}" name="value[{$vo.spec_value_id}]" type="text" value="{$vo.spec_value_name}"  data-rule="required">
                                                </div>
                                                <div class="col-xs-2 col-sm-1">
                                                    {if $key>0}
                                                        <button type="button" data-id="{$vo.spec_value_id}" class="btn btn-danger btn-del btn-xs"><i class="fa fa-remove"></i></button>
                                                    {/if}
                                                </div>                                        
                                            </div>
                                        {/volist}
                                        {else}
                                        <div class="form-group">
                                            <label for="c-value" class="control-label col-xs-12 col-sm-2">属性:</label>
                                            <div class="col-xs-10 col-sm-7">
                                                <input class="form-control" name="value[]" type="text"  data-rule="required">
                                            </div>
                                            <div class="col-xs-2 col-sm-1">
                                                
                                            </div>                                        
                                        </div>
                                        {/if}
                                        <script type="text/html" id="tpl">
                                            <div class="form-group">
                                                <label for="c-value" class="control-label col-xs-12 col-sm-2"></label>
                                                <div class="col-xs-10 col-sm-7">
                                                    <input class="form-control"  data-add data-id="{$row['spec_id']}" name="value[]" type="text">
                                                </div>
                                                <div class="col-xs-2 col-sm-1">
                                                    <button type="button" class="btn btn-danger btn-del btn-xs"><i class="fa fa-remove"></i></button>
                                                </div>                                        
                                            </div>  
                                        </script> 
                                    </div>                                   

                                   <div class="form-group">
                                        <label class="control-label col-xs-12 col-sm-2"></label>
                                        <div class="col-xs-12 col-sm-8">
                                        <a href="javascript:" id="add"><i class="fa fa-plus"></i>添加属性</a>
                                        </div>
                                   </div>                              

                                    <div class="form-group layer-footer">
                                        <label class="control-label col-xs-12 col-sm-2"></label>
                                        <div class="col-xs-12 col-sm-8">
                                            <button type="submit" class="btn btn-success btn-embossed disabled">确定</button>
                                            <button type="reset" class="btn btn-default btn-embossed">重置</button>
                                        </div>
                                    </div>
                                </form>

                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <script type="text/javascript">
        var delete_url="{:url('admin/goods/specValueDelete')}";
        var update_url="{:url('admin/goods/specValueEdit')}";
        </script>
        {include file="public/javascript" jsname="backend/goods/spec" controllername="index"  actionname="edit"/}
    </body>
</html>